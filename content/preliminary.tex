\subsection{System design} % or Proposed Solution?

\paragraph{} The system is broken up into several components of increasing specificity (i.e. Buyer $|$ Seller $\in$ Pool $\in$ Blockchain $\in$ Global). Each component exists in a set under it's parent

\paragraph{Global} 

\begin{itemize}
  \item $\mathbb{H}$ - Global hash rate
  \item $\mathbb{B}$ - Set of blockchains
\end{itemize}

\paragraph{Blockchain}

\begin{itemize}
  \item $R$ - Block reward
  \item $T$ - Block time
\end{itemize}

\paragraph{Pool}

\begin{itemize}
  \item $C$ - total chunks
  \item $c$ - Available chunks
  \item $H$ - Hash rate
  \item $i$ - Trade intervals 
  \item $t$ - Tax
  \item $P$ - Chunk sell price
  \item $R$ - Reward per chunk
\end{itemize}

\begin{equation}
  R = \frac{\mathbb{B}}{c} \times \frac{H}{\mathbb{H}}
\end{equation}

\todo[inline]{what if chunk computational power is varied}

\paragraph{Seller}

\begin{itemize}
  \item $x$ - Owned chunks
  \item $p_s$ - Sell price
\end{itemize}

\begin{align}
  \begin{split}
    profit_{held} = &\; x \times R \\
    &\; - x \times p_s \times t
  \end{split}
\end{align}

\begin{equation}
  profit_{sale} = (y \times p_s)
\end{equation}

\paragraph{Buyer}

\begin{itemize}
  \item $y$ - Wanted chunks
  \item $p_b$ - Sell price
\end{itemize}

\begin{align}
  \begin{split}
    profit_{purchase} = &\; (x + y) \times R \\
    &\; - (x + y) \times p_b \times t \\
    &\; - y \times p_s
  \end{split}
\end{align}

\subsection{Simulation}

\paragraph{} A basic functional implementation of the simulation has been completed, viewable in Appendix \ref{appendix:code} \todo{is it necessary to put this in the appendix?} or available at \url{https://github.com/hans-m-song/harbergers-tax}. 

\begin{algorithm}[H]
  \begin{algorithmic}[1]
    \Procedure{trade}{$P, t$} \Comment{$P \gets$ set of participants, $t \gets$ tax rate}
      \For{$seller \in P$}
        \State{$\textsc{auction}(seller, seller.price, P, \textsc{null})$}
      \EndFor
      \For{$taxee \in P$} \Comment{Taxation}
        \While{$taxee.funds < (taxee.ownedChunks \times taxee.price \times t)$}
          \State{$taxee.ownedChunks \gets taxee.ownedChunks - 1$}
        \EndWhile
        \State{$taxee.funds \gets taxee.funds - (taxee.ownedChunks \times taxee.price \times t)$}
      \EndFor
    \EndProcedure
    \Procedure{auction}{$P$, $s$, $p$, $b$} \Comment{$P \gets$ bidders, $s \gets$ seller, $p \gets$ current price, $b \gets$ last bidder}
      \If{$P = \emptyset$}
        \State{$\textsc{transact}(s, b, p)$}
        \State{\Return}
      \EndIf
      \State{$maxBidder \gets b$}
      \State{$maxBid \gets p$}
      \For{$bidder \in P$}
        \State{$bid \gets bidder.\textsc{bid}(p)$}
        \If{$bid > maxBid$}
          \State{$maxBid \gets bid$}
          \State{$maxBidder \gets bidder$}
        \EndIf
      \EndFor
      \State{$P' \gets \emptyset$}
      \For{$bidder \in P$}
        \If{$bidder.$\textsc{canParticipate}$(seller.price)$}
          \State{$B \gets B \cup bidder$}
        \EndIf
      \EndFor
      \State{\Return $\textsc{auction}(P', s, maxBid, maxBidder)$}
    \EndProcedure
    \Procedure{transact}{$b, s, p$} \Comment{$b \gets$ buyer, $s \gets$ seller, $p \gets$ price}
      \State{$b.funds \gets b.funds - p$}
      \State{$b.ownedChunks \gets b.ownedChunks + 1$}
      \State{$s.funds \gets s.funds + p$}
      \State{$s.ownedChunks \gets s.ownedChunks - 1$}
    \EndProcedure
  \end{algorithmic}
\end{algorithm}

\subsection{Results}

\subsubsection{Data Collection}

\subsubsection{Analysis}

% observations, trends, validation